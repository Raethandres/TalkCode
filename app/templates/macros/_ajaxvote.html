{% macro ajax_vote(id_answer) %}
    <script>
    var csrftoken = $('meta[name=csrf-token]').attr('content')

    $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken)
            }
        }
    })
        $('.answerup').click(function(){
          var scope = this;
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('upvote',  model='answer'|string(), id=id_answer) }}",
                  dataType: "json",
          })
            .done(function(response) {
                $(scope).text(response.likes);
            })
        });



        $('.answerdown').click(function(){
          var scope = this;
          $.ajax({
              type: "POST",
              url: "{{ url_for('downvote',  model='answer'|string(), id=id_answer) }}",
              dataType: "json",
          })
            .done(function(response) {
                 $(scope).text(response.likes);
            })
        });
    </script>
{% endmacro %}
